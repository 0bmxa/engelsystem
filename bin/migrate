#!/usr/bin/env php
<?php

use Composer\Autoload\ClassLoader;
use Engelsystem\Application;
use Engelsystem\Database\Migration\Migrate;
use Engelsystem\Database\Migration\MigrationServiceProvider;

require_once __DIR__ . '/../includes/application.php';

/** @var $loader ClassLoader */
$baseDir = __DIR__ . '/../db/migrations';

/** @var Application $app */
$app = app();
$app->register(MigrationServiceProvider::class);

/** @var Migrate $migration */
$migration = $app->get('db.migration');
$migration->setOutput(function ($text) { echo $text . PHP_EOL; });
$migration->run($baseDir, Migrate::UP);
